# Johnson 全源最短路

一般 floyd 足够使用, 但是假设是稀疏图, 点数很多, 还有负权边, 就很难办了. 此时多次 dij 不能搞, folyd 次数过多, Johnson 能够达到 $O(nmlogn)$ 的速度.

1. 建立虚点, 使用 SPFA 算出虚点到所有其他点之间的最短路长度 $h_i$
2. 用 $h$ 更新边权, $w(u,v)' = w(u,v) + h(u) - h(v)$. 这之后非负, 因为 $h(v) <= h(u)+w(u,v)$
3. 独立跑 dij
